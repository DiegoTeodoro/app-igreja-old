<!-- Remover o iframe e apenas mostrar a tabela gerada -->
<div class="container">
  <h2>Relatório de Saldo de Estoque</h2>
  <button mat-raised-button color="primary" (click)="gerarPDF()">Gerar PDF</button>

  <table mat-table [dataSource]="saldoEstoque" class="mat-elevation-z8" *ngIf="saldoEstoque.length > 0">
    <!-- Colunas da tabela -->
    <ng-container matColumnDef="produto_nome">
      <th mat-header-cell *matHeaderCellDef> Produto </th>
      <td mat-cell *matCellDef="let element"> {{element.produto_nome}} </td>
    </ng-container>

  <!-- Coluna Código -->
  <ng-container matColumnDef="produto_id">
    <th mat-header-cell *matHeaderCellDef> Código </th>
    <td mat-cell *matCellDef="let element"> {{element.produto_id}} </td>
  </ng-container>

  <!-- Coluna Quantidade -->
  <ng-container matColumnDef="quantidade">
    <th mat-header-cell *matHeaderCellDef> Quantidade </th>
    <td mat-cell *matCellDef="let element"> {{element.quantidade}} </td>
  </ng-container>

  <!-- Coluna Valor Unitário -->
  <ng-container matColumnDef="valor_unitario">
    <th mat-header-cell *matHeaderCellDef> Valor Unitário </th>
    <td mat-cell *matCellDef="let element"> {{element.valor_unitario | currency:'BRL':'symbol':'1.2-2'}} </td>
  </ng-container>

  <!-- Coluna Valor Total -->
  <ng-container matColumnDef="valor_total">
    <th mat-header-cell *matHeaderCellDef> Valor Total </th>
    <td mat-cell *matCellDef="let element"> {{element.valor_total | currency:'BRL':'symbol':'1.2-2'}} </td>
  </ng-container>

  <!-- Coluna Atualizado Em -->
  <ng-container matColumnDef="updated_at">
    <th mat-header-cell *matHeaderCellDef> Atualizado Em </th>
    <td mat-cell *matCellDef="let element"> {{element.updated_at | date}} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  <!-- Linha de valor total -->
  <tr>
    <td colspan="4"></td> <!-- Espaço para alinhar à direita -->
    <td colspan="1" style="text-align: right; font-weight: bold;">
      Valor Total Estoque:
    </td>
    <td style="text-align: left; font-weight: bold;">
      {{ totalEstoque | currency:'BRL':'symbol':'1.2-2' }}
    </td>
  </tr>
</table>
 <!-- Remover a exibição do valor total na página -->
<!--
<div style="text-align: right; margin-top: 10px;">
  <strong>Valor Total Estoque:</strong> {{ totalEstoque | currency:'BRL':'symbol':'1.2-2' }}
</div>
-->

